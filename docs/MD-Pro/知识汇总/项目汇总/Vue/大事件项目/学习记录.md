# å¤§äº‹ä»¶é¡¹ç›®

> æ–‡ç« ç®¡ç†ç³»ç»Ÿé¡¹ç›®



## é¡¹ç›®æŠ€æœ¯æ ˆ

- æ ¸å¿ƒæŠ€æœ¯æ ˆ
  - `Vue3`
  - `Vite`
  - `Pinia`
  - `VueRouter`
  - `ElementPlus`
- å…¶å®ƒæŠ€æœ¯æ ˆ
  - `eslint`
  - `pretty`
  - `ç­‰`



## æ’ä»¶

### pnpm

::: details è¯¦ç»†



- ç®€ä»‹

  - æ¯”`npm`ã€`yarn`æ›´ä¼˜ç§€çš„åŒ…ç®¡ç†ç³»ç»Ÿ

- è¯­æ³•

  - pnpm install/i/add xxx [-D | -s]

  - pnpm remove/uninstall xxx

- pnpmæ­å»ºvite+vue3è„šæ‰‹æ¶å‘½ä»¤

  ```powershell
  pnpm create vite
  æˆ–
  pnpm create vue
  ```

:::



---



### eslintæ’ä»¶

::: details è¯¦ç»†



1. ç¯å¢ƒåŒæ­¥

  - **å®‰è£…äº†æ’ä»¶ `ESlint`ï¼Œå¼€å¯ä¿å­˜è‡ªåŠ¨ä¿®å¤**

  - **ç¦ç”¨äº†æ’ä»¶ `Prettier`ï¼Œå¹¶å…³é—­ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–**

    - å¹³æ—¶è‡ªå·±å¼€å‘æ—¶ï¼Œè®°å¾—é‡æ–°æ‰“å¼€

    ```js
    // ESlintæ’ä»¶ + Vscodeé…ç½® å®ç°è‡ªåŠ¨æ ¼å¼åŒ–ä¿®å¤
    "editor.codeActionsOnSave": {
        "source.fixAll": true
    },
    "editor.formatOnSave": false,
    ```

    

2. è§„åˆ™é…ç½®

  ```js
      rules: {
      'prettier/prettier': [
        'warn',
        {
          singleQuote: true, // å•å¼•å·
          semi: false, // æ— åˆ†å·
          printWidth: 80, // æ¯è¡Œå®½åº¦è‡³å¤š80å­—ç¬¦
          trailingComma: 'none', // ä¸åŠ å¯¹è±¡|æ•°ç»„æœ€åé€—å·
          endOfLine: 'auto' // æ¢è¡Œç¬¦å·ä¸é™åˆ¶ï¼ˆwin mac ä¸ä¸€è‡´ï¼‰
        }
      ],
      'vue/multi-word-component-names': [
        'warn',
        {
          ignores: ['index'] // vueç»„ä»¶åç§°å¤šå•è¯ç»„æˆï¼ˆå¿½ç•¥index.vueï¼‰
        }
      ],
      'vue/no-setup-props-destructure': ['off'], // å…³é—­ props è§£æ„çš„æ ¡éªŒ
      // ğŸ’¡ æ·»åŠ æœªå®šä¹‰å˜é‡é”™è¯¯æç¤ºï¼Œcreate-vue@3.6.3 å…³é—­ï¼Œè¿™é‡ŒåŠ ä¸Šæ˜¯ä¸ºäº†æ”¯æŒä¸‹ä¸€ä¸ªç« èŠ‚æ¼”ç¤ºã€‚
      'no-undef': 'error'
      }
  ```



:::


---

### huskyæ’ä»¶

::: details è¯¦ç»†



#### åŠŸèƒ½

1. å…¨é‡æ£€æŸ¥
2. addæš‚å­˜ä¿®æ”¹æ—¶ä¼šæ£€æŸ¥å¹¶æŠ¥å‡ºä»£ç é”™è¯¯
3. ç”±äº`eslint`çš„`lint`å‘½ä»¤ä¸ºå…¨é‡æ£€æŸ¥ï¼Œååˆ†è€—æ—¶ï¼Œä¸”ä¼šä¸€åŒæ£€æŸ¥ä»¥å¾€éè‡ªå·±æ‰€å†™çš„éƒ¨åˆ†ï¼Œæ•…éœ€è¦ä¸€ä¸ªåªæ£€æŸ¥è‡ªå·±æäº¤çš„ä»£ç çš„è§£å†³æ–¹æ¡ˆ

#### ä½¿ç”¨

1. åˆå§‹åŒ–gitä»“åº“

2. åˆå§‹åŒ–ä¸å®‰è£…

    ```
    pnpm dlx husky-init
    pnpm install
    ```

3. ä¿®æ”¹ `.husky/pre-commit` æ–‡ä»¶

    ```
    // æ›¿æ¢ npm test
    pnpm lint
    ```

:::



### lint-stagedæ’ä»¶

::: details è¯¦ç»†



#### åŠŸèƒ½

- åªåœ¨`commit`é˜¶æ®µæ£€æŸ¥æäº¤éƒ¨åˆ†çš„ä»£ç å¹¶æŠ¥å‡ºé”™è¯¯ï¼Œä¸ä¼šæ£€æŸ¥å†å²é”™è¯¯

#### ä½¿ç”¨

1. å®‰è£…

    ```powershell
    pnpm i lint-staged -D
    ```

2. é…ç½®`pakcage.json`é…ç½®é¡¹

    ```json
    {
      "script":{
        "lint-staged":"lint-staged"
      },
      "lint-staged":{
        "*.{js,ts,vue}":[
          "eslint --fix"
        ]
      },
    }
    ```

3. å†æ¬¡ä¿®æ”¹`husky`å‘½ä»¤

  ```cmd
  pnpm lint-staged
  ```

::: 




---

## åˆå§‹åŒ–ç›®å½•ç»“æ„

> åˆ é™¤åˆå§‹åŒ–çš„é»˜è®¤æ–‡ä»¶
>
> ä¿®æ”¹å‰©ä½™ä»£ç å†…å®¹
>
> æ–°å¢è°ƒæ•´æˆ‘ä»¬éœ€è¦çš„ç›®å½•ç»“æ„
>
> æ‹·è´åˆå§‹åŒ–èµ„æºæ–‡ä»¶ï¼Œå®‰è£…é¢„å¤„ç†å™¨æ’ä»¶





### ElMessageç»„ä»¶æ ·å¼é”™è¯¯

::: details è¯¦æƒ…



- åŸå› ï¼šå¯èƒ½ä¸ºå…¨å±€å¼•å…¥ä¸å±€å†…å¼•å…¥å‘½åäº§ç”Ÿäº†å†²çª
- è§£å†³æ–¹æ¡ˆ:ä¿®æ”¹eslintå…¨å±€é…ç½®

```cjs
// .eslintrc.cjs
module.exports = {
  globals: {
    defineEmits: 'readonly',
    defineProps: 'readonly',
    defineExpose: 'readonly',
    withDefaults: 'readonly',
    WeixinJSBridge: 'readonly',
    ElMessage: 'readonly',
    ElMessageBox: 'readonly',
    ElLoading: 'readonly'
  }
}
```

:::



### å†…ç½®`day.js`æ ¼å¼åŒ–æ—¶é—´åº“

- `Element-plus`ç»„ä»¶åº“é»˜è®¤æ”¯æŒ`day.js`è¿›è¡Œæ—¥æœŸæ—¶é—´å¤„ç†ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å¯¼å…¥ä½¿ç”¨

```vue
<script>
    import { dayjs } from 'element-plus'
</script>
```





## Element-Plus

### æŒ‰éœ€å¼•å…¥

::: details è¯¦æƒ…

1. å®‰è£…`element-plus`

```powershell
pnpm add element-plus
```

2. é€‰æ‹©æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥

   1. å®‰è£…æ’ä»¶`unplugin-vue-components`å’Œ`unplugin-auto-import`

   ```powershell
   npm install -D unplugin-vue-components unplugin-auto-import
   ```

   

   2. é…ç½®`Vite`çš„é…ç½®æ–‡ä»¶

   ```js
   // vite.config.ts
   import { defineConfig } from 'vite'
   import AutoImport from 'unplugin-auto-import/vite'
   import Components from 'unplugin-vue-components/vite'
   import { ElementPlusResolver } from 'unplugin-vue-components/resolvers'
   
   export default defineConfig({
     // ...
     plugins: [
       // ...
       AutoImport({
         resolvers: [ElementPlusResolver()],
       }),
       Components({
         resolvers: [ElementPlusResolver()],
       }),
     ],
   })
   ```

3. ç›´æ¥ä½¿ç”¨ç»„ä»¶

:::



### iconå¼•å…¥ä¸ä½¿ç”¨

::: details è¯¦æƒ…

```vue
// ä¸¤ç§ä½¿ç”¨æ–¹æ³•éƒ½ç”¨åŒä¸€ç§å¼•å…¥æ–¹å¼è¿›è¡ŒæŒ‰éœ€å¼•å…¥
<template>
<el-input
  :prefix-icon="User"
  placeholder="è¯·è¾“å…¥ç”¨æˆ·å"
/>

<el-icon><User /></el-icon>

</template>

<script>
import {
  User
} from '@element-plus/icons-vue'
</script>

```

:::



### ä¸­è‹±è¯­è¨€å¤„ç†Config Provider

::: details è¯¦æƒ…

- é»˜è®¤æ˜¯è‹±æ–‡çš„ï¼Œç”±äºè¿™é‡Œä¸æ¶‰åŠåˆ‡æ¢ï¼Œ æ‰€ä»¥åœ¨ App.vue ä¸­ç›´æ¥å¯¼å…¥è®¾ç½®æˆä¸­æ–‡å³å¯

```vue
<template>
  <!-- å›½é™…åŒ–å¤„ç† -->
  <el-config-provider :locale="zh">
    <router-view />
  </el-config-provider>
</template>

<script setup>
import zh from 'element-plus/es/locale/lang/zh-cn.mjs'
</script>
```

:::



## Pinia



### Pinia Storeå®šä¹‰è¯­æ³•ä¹‹Setup Storeè¯­æ³•

::: details è¯¦æƒ…

åœ¨ *Setup Store* ä¸­ï¼š

- `ref()` å°±æ˜¯ `state` å±æ€§
- `computed()` å°±æ˜¯ `getters`
- `function()` å°±æ˜¯ `actions`

```js
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'

// å‘½åï¼šuseXxxStore
export const useNumStore = defineStore('num', () => {
  let num = ref(0)

  let dbNum = computed(() => {
    return num.value * 2
  })

  function addNum() {
    num.value++
  }
  function redNum() {
    num.value--
  }

  return {
    num,
    dbNum,
    addNum,
    redNum
  }
})
```

 :::



### Piniaæ•°æ®æŒä¹…åŒ–ï¼ˆè‡ªåŠ¨æœ¬åœ°å­˜å‚¨ï¼‰

> è‡ªåŠ¨å°†stateæ•°æ®è¿›è¡Œæœ¬åœ°å­˜å‚¨
>
> æ³¨æ„ï¼šsetupå¼æ•°æ®è¦returnæ‰ç®—æ˜¯state

::: details è¯¦æƒ…

- å®‰è£…

```powershell
pnpm i pinia-plugin-persistedstate
```

- é…ç½®

```js
// main.js

import persist from 'pinia-plugin-persistedstate'

app.use(createPinia().use(persist))
```

```js
// store.js
export const useStore = defineStore(
  'main',
  () => {
    const someState = ref('ä½ å¥½ pinia')
    return { someState }
  },
  {
    persist: true,
  },
)
```

:::



### Piniaç‹¬ç«‹ç»´æŠ¤ä¸ä»“åº“ç»Ÿä¸€å¯¼å‡º

::: details è¯¦æƒ…

```js
// main.js
import pinia from '@/stores'
app.use(pinia)

// stores/index.js
import { createPinia } from 'pinia'
import persist from 'pinia-plugin-persistedstate'

const pinia = createPinia()
pinia.use(persist)

// piniaç‹¬ç«‹ç»´æŠ¤
export default pinia

// ä»“åº“ç»Ÿä¸€å¯¼å‡º
// å¯¼å…¥å¹¶å¯¼å‡º
export * from './modules/num'
export * from './modules/user'
```

:::



---

## Axios

### é…ç½®Axioså®ä¾‹

1. åŸºç¡€åœ°å€ï¼Œè¶…æ—¶æ—¶é—´
2. è¯·æ±‚æºå¸¦èº«ä»½è®¤è¯å‚æ•°(token)
3. æ ¹æ®æ–‡æ¡£å¤„ç†ä¸€èˆ¬å¤±è´¥å“åº”
4. å¤„ç†ç‰¹æ®Šå¤±è´¥å“åº”ï¼ˆ401ï¼‰

::: details è¯¦æƒ…

```js
import axios from 'axios'
// ç»„åˆå¼APIçš„å¥½å¤„ï¼Œæƒ³åœ¨å“ªå¼•å…¥å°±åœ¨å“ªå¼•å…¥ï¼ï¼ï¼
import {
  useUserStore
} from '@/stores'
// import { ElMessage as EM } from 'element-plus'
import {
  useRouter
} from 'vue-router'

const baseURL = 'http://big-event-vue-api-t.itheima.net'

const instance = axios.create({
  // TODO 1. åŸºç¡€åœ°å€ï¼Œè¶…æ—¶æ—¶é—´
  baseURL,
  timeout: 10000
})

// è¯·æ±‚æ‹¦æˆªå™¨
instance.interceptors.request.use(
  (config) => {
    // TODO 2. æºå¸¦token
    config.headers.Authorization = useUserStore().token
    return config
  },

  (err) => Promise.reject(err)
)

// å“åº”æ‹¦æˆªå™¨
instance.interceptors.response.use(
  (res) => {
    // TODO 3. å¤„ç†ä¸šåŠ¡å¤±è´¥
    // TODO 4. æ‘˜å–æ ¸å¿ƒå“åº”æ•°æ®
    if (res.data.code === 0 || res.data.status === 0) {
      return res
    }
    // å¼¹çª—æç¤º
    ElMessage.error(res.data.message || 'error!!!')
    return Promise.reject(res.data)
  },
  (err) => {
    // TODO 5. å¤„ç†401é”™è¯¯ ==>æƒé™ä¸è¶³ | tokenè¿‡æœŸï¼Œæ‹¦æˆªåˆ°ç™»å½•
    if (err.response.status === 401) {
      useRouter().push('/login')
    }

    // é”™è¯¯çš„é»˜è®¤æƒ…å†µ
    ElMessage.error(err.response.data.message || 'error!!!')
    // å¼¹çª—æç¤º
    return Promise.reject(err)
  }
)

export default instance
export {
  baseURL
}
```

:::



---

## é¡µé¢è·¯ç”±

::: details è¯¦æƒ…

- ä¸€çº§è·¯ç”±

  - \login

  - \

    - äºŒçº§è·¯ç”±

      - article\channel
      - article\manage
      - user\profile
      - user\avatar

      - user\password


- æ–‡ä»¶ç›®å½•

  - views

    - layout

      - `LayoutContainer.vue`

        >  ä½œç”¨ï¼Ÿ

    - login

      - `LoginPage.vue`

    - article

      - `LoginPage.vue`
      - `ArticleChannel.vue`
      - `ArticleManage.vue`

    - user

      - `UserAvatar.vue`
      - `UserPassword.vue`
      - `UserProfile.vue`

:::

### è·¯ç”±ä¹¦å†™

- ç»„ä»¶å¯¼å…¥ä½¿ç”¨å¼‚æ­¥ç»„ä»¶å¯¼å…¥è¯­æ³•
  - `component: () => import('@/views/login/LoginPage.vue')`
- è·¯ç”±é‡å®šå‘è®¾ç½®
  - `redirect: '/article/manage'`



## ç™»å½•æ³¨å†Œé¡µé¢

### é™æ€å¸ƒå±€æ³¨æ„äº‹é¡¹

::: details è¯¦æƒ…

1. ç±»åä½¿ç”¨`å°å†™å•è¯è¿æ¥æ³•`æ ¼å¼

2. element-pluså¸ƒå±€

   1. Layoutç½‘æ ¼å¸ƒå±€ï¼šåˆ’åˆ†ä¸º24åˆ—çš„æ …æ ¼æ¨¡å‹

      1. spanå±æ€§ï¼šå ç”¨åˆ—æ•°
      2. offsetå±æ€§ï¼šåç§»åˆ—æ•°

   2. Formè¡¨å•

      1. sizeå±æ€§

   3. Inputè¾“å…¥æ¡†

      1. prefix-iconå±æ€§é…ç½®icon

   4. Iconå›¾æ ‡

      ```powershell
      pnpm install @element-plus/icons-vue
      ```

:::



### è¡¨å•ç»„ä»¶ä½¿ç”¨

> el-form

#### å¿…è¦å‚æ•°

- v-modelï¼šæ•°æ®å¯¹è±¡

- rulesï¼šæ ¡éªŒè§„åˆ™

- propï¼šè¡¨å•é¡¹å¯¹åº”é”®å

#### æ ¡éªŒè§„åˆ™

::: details è¯¦æƒ…

- ç±»å‹
  1. éç©ºæ ¡éªŒ `required`
     - ä¼šä½¿å¾—è¡¨å•labelå‰å¸¦çº¢è‰²æ˜Ÿæ˜Ÿ *ç”¨æˆ·å
  2. é•¿åº¦æ ¡éªŒ `min`ã€`max`
  3. æ­£åˆ™æ ¡éªŒ `pattern`
  4. è‡ªå®šä¹‰æ ¡éªŒ `validator`
     1. rule è¯¥æ¡è§„åˆ™ç›¸å…³ä¿¡æ¯
     2. value è¡¨å•å€¼
     3. callback `å›è°ƒå‡½æ•°`
        - ä¸ä¼ å‚ => æ ¡éªŒé€šè¿‡
        - ä¼ å…¥ Errorå¯¹è±¡ ==> æŠ›å‡ºé”™è¯¯ä¿¡æ¯
          - è‹¥æ­¤æ—¶æ²¡è®¾ç½®messageå±æ€§ï¼Œåˆ™æç¤ºæ æ–‡å­—ä¸ºé”™è¯¯ä¿¡æ¯

- æç¤ºä¿¡æ¯ message

- è§¦å‘æ—¶æœº trigger

:::

#### é¢„æ ¡éªŒ

- `validate`

::: details è¯¦æƒ…


```js
const formRef = ref()
const login = async () => {
  await formRef.value.validate()
  // è‹¥æ ¡éªŒä¸é€šè¿‡åˆ™ä¸ä¼šæ‰§è¡Œåç»­ä»£ç 
  console.log('æ³¨å†Œä¸­')
}
```

:::



#### é‡ç½®è¡¨å•

- `resetFields`

::: details è¯¦æƒ…


```js
const formRef = ref()
const resetForm = (isSwitch= false) => {
  if (!formRef.value) return
  if(isSwitch)  isRegister.value = !isRegister.value
  formRef.value.resetFields()
}
```

::: 



## layoutæ¶å­é¡µé¢

### å¸ƒå±€

::: details è¯¦æƒ…

- å¸ƒå±€å®¹å™¨ Container
  - `el-container`
  - `el-aside`
  - `el-header`
  - `el-main`
  - `el-footer`
- ä¾§è¾¹èœå• Menu
  - `el-menu`
    - `default-active`    é»˜è®¤æ¿€æ´»å¯¹åº”`index`å€¼çš„itemé¡¹
    - `router`    å¼€å¯åï¼Œç‚¹å‡»itemä¼šè·³è½¬è‡³indexå¯¹åº”çš„è·¯ç”±
  - `el-menu-item`
    - `index`    è‹¥indexä¸ä»¥`/`å¼€å¤´ï¼Œåˆ™ä¼šä»¥å½“å‰è·¯ç”±ä½œä¸ºçˆ¶è·¯ç”±ï¼›å¦åˆ™ï¼Œæ›¿æ¢å½“å‰è·¯ç”±
  - `el-sub-menu`
- ä¸»ä½“å¤´éƒ¨ä¸‹æ‹‰èœå• Dropdown
  - `el-dropdown`
    - `commandäº‹ä»¶`    åœ¨ä¸‹æ‹‰èœå•é¡¹è¢«ç‚¹å‡»æ—¶è§¦å‘å¯¹åº”æ–¹æ³•ï¼Œä¸”æ¥æ”¶ä¸€ä¸ªå€¼ä¸ºä¸‹æ‹‰é¡¹`command`å±æ€§å€¼çš„å‚æ•°
    - `placement`    è®¾ç½®ä¸‹æ‹‰èœå•å‡ºç°ä½ç½®
  - `el-dropdown-menu`
  - `el-dropdown-item`
    - `command`    å±æ€§

:::



### å…¨å±€è·¯ç”±å®ˆå«

- é˜²æ­¢æ— tokenè¿›å…¥éloginè·¯ç”±
- `router.beforeEach`

```js
// router.js
router.beforeEach((to) => {
  const userStore = useUserStore()
  if (to.path !== '/login' && !userStore.token) {
    // è·³è½¬ä¸­æ–­ï¼Œè¿”å›åˆ°from
    // return false

    // é‡å®šå‘
    return '/login'
  }
})
```



### GETï¼šç”¨æˆ·ä¿¡æ¯è·å–

- å°è£…api
- æ•°æ®å­˜å‚¨ä¸userStoreä¸­å¹¶è¿›è¡Œæœ¬åœ°å­˜å‚¨
- è·å–ä¿¡æ¯å¹¶å°†å…¶æ¸²æŸ“è‡³é¡µé¢



### ç”¨æˆ·ç™»å‡ºä½“éªŒä¼˜åŒ–

- ä½¿ç”¨å¼¹å‡ºæ¶ˆæ¯æ¡†`ElMessageBox`æ¥é˜²æ­¢ç”¨æˆ·è¯¯æ“ä½œ

```js
// ç”¨æˆ·ç™»å‡ºç¡®è®¤
// å–æ¶ˆæ—¶ä¼šæœ‰erroréœ€è¦è¿›è¡Œcatch
try {
  // å†…å®¹ æ ‡é¢˜ é…ç½®å¯¹è±¡
  await ElMessageBox.confirm('ç¡®å®šè¦é€€å‡ºç™»å½•?', 'æ¸©é¦¨æç¤º', {
    confirmButtonText: 'ç¡®å®š',
    cancelButtonText: 'å–æ¶ˆ',
    type: 'warning'
  })
} catch (error) {
  return
}
```





---

## åŠŸèƒ½æ¨¡å—æ¶å­ç»„ä»¶

- componentsæ–°å»ºç»„ä»¶PageContainer
- åˆ†æå…¬å…±ç»„æˆéƒ¨åˆ†ã€å¯é€‰éƒ¨åˆ†ä¸ç‰¹æœ‰éƒ¨åˆ†
  - å…¬å…±ç»„æˆéƒ¨åˆ†ä¸éœ€è¦ä½¿ç”¨æ’æ§½
  - å¯é€‰éƒ¨åˆ†ä½¿ç”¨å…·åæ’æ§½
  - ç‰¹æœ‰éƒ¨åˆ†ä½¿ç”¨æ™®é€šæ’æ§½





## æ–‡ç« åˆ†ç±»é¡µé¢

### è¡¨æ ¼å¸ƒå±€

::: details è¯¦æƒ…

- `el-table`

  - `data`    å€¼ä¸ºå¯¹è±¡ç»„æˆçš„æ•°ç»„ï¼Œä¸ºè¡¨æ ¼æ•°æ®
  - `v-loaging`    å€¼ä¸ºboolï¼Œè¡¨ç¤ºæ˜¯å¦æ˜¾ç¤ºåŠ è½½ä¸­æ•ˆæœ
  - `#empty` ç©ºæ’æ§½   å½“æ•°æ®ä¸ºç©ºæ—¶å±•ç¤ºå†…éƒ¨å†…å®¹

- `el-table-column`

  - `type`    è‹¥ä¸ºindexï¼Œåˆ™ä¼šå±•ç¤ºè¡¨æ ¼é¡¹åºå·
  - `label`  è¯¥åˆ—è¡¨æ ¼å¤´
  - `prop`    æ•°ç»„ä¸­å¯¹è±¡å¯¹è±¡çš„é”®å
  - `width/min-width`    è¯¥åˆ—å®½åº¦/æœ€å°å®½åº¦ ï¼ˆpxï¼‰ 

  - `#default=â€œscope"`  è‡ªå®šä¹‰åˆ—æ’æ§½   æ¥æ”¶ä»¥è¡Œä¿¡æ¯å¯¹è±¡ï¼Œå¯è‡ªå®šä¹‰åˆ—å†…éƒ¨å†…å®¹

:::



### è§£å†³tableçš„heightæ— æ³•è‡ªé€‚åº”çš„é—®é¢˜

1. ä¸ºel-tableç”¨çˆ¶ç›’å­è¿›è¡ŒåŒ…è£¹ï¼Œå¹¶ä¸”çˆ¶ç›’å­é«˜åº¦è‡ªé€‚åº”
2. æ‰€åœ¨el-cardçš„card-bodyè¿›è¡Œé«˜åº¦è‡ªé€‚åº”
3. ç»„ä»¶æŒ‚è½½æ—¶è·å–tableçˆ¶ç›’å­é«˜åº¦ï¼Œå¹¶å°†å…¶èµ‹äºˆåˆ°el-tableçš„heightå€¼



### æ¨¡å—APIåŠŸèƒ½

#### æ·»åŠ åˆ†ç±»

- ä¸éœ€è¦å›æ˜¾ç¤º

#### ç¼–è¾‘åˆ†ç±»

- éœ€è¦å›æ˜¾å†…å®¹ï¼ˆåˆ†ç±»å†…å®¹å‡ºç°åœ¨è¡¨å•ä¸­ï¼‰



### Dialogç»„ä»¶åŒ–

- çˆ¶ç»„ä»¶ä¼ å…¥rowä¿¡æ¯ç”¨äºdialogæ¸²æŸ“ï¼Œå¹¶ä¸”æš´éœ²æ›´æ–°æ•°æ®æ–¹æ³•
- å­ç»„ä»¶å‘çˆ¶ç»„ä»¶æš´éœ²dialogæ˜¾ç¤ºæ–¹æ³•

#### 

## æ–‡ç« ç®¡ç†é¡µé¢

#### é¡µé¢å¸ƒå±€

::: details è¯¦æƒ…

- æœç´¢æ è¡¨å•
- æ–‡ç« ä¿¡æ¯è¡¨æ ¼
  - é»˜è®¤æ’æ§½è‡ªå®šä¹‰è¡¨æ ¼é¡¹å±•ç¤ºå½¢å¼ï¼Œä¸”å¯ä»¥è§£æ„å‡ºrow
  - element-plusè‡ªå¸¦`dayjs`åº“ï¼Œçœ‹ç”¨`dayjs`å˜é‡åå¯¼å…¥ä½¿ç”¨
- åˆ†é¡µå™¨
  - ä¸­è‹±å›½é™…åŒ–å¤„ç†
- æ–‡ç« å‘å¸ƒ/ç¼–è¾‘æŠ½å±‰ç»„ä»¶
  - æ–‡ç« ä¿¡æ¯è¡¨å•
  - æ–‡ä»¶ä¸Šä¼ ç»„ä»¶
  - å¯Œæ–‡æœ¬ç»„ä»¶

:::



#### ä¸Šä¼ å°é¢å›¾ç‰‡æ–‡ä»¶ `el-upload`

::: details è¯¦æƒ…

1. å…³é—­è‡ªåŠ¨ä¸Šä¼ ï¼Œå–æ¶ˆæ–‡ä»¶åˆ—è¡¨å±•ç¤º

2. å‡†å¤‡æ•°æ® å’Œ é€‰æ‹©å›¾ç‰‡çš„å¤„ç†é€»è¾‘

   - File => URL

   - å°†fileå¯¹è±¡è½¬ä¸º`ObjectURL`ï¼Œå†äº¤ç”±imgçš„srcè¿›è¡Œæ¸²æŸ“

```jsx
const imgUrl = ref('')
const onUploadFile = (uploadFile) => {
  imgUrl.value = URL.createObjectURL(uploadFile.raw)
  formModel.value.cover_img = uploadFile.raw
}

// uploadFile.rawä¸ºå¯¹åº”çš„fileå¯¹è±¡
// è‹¥ä¸ºåŸç”Ÿè½¬æ¢ï¼Œåˆ™uploadFile.rawåº”æ›¿æ¢ä¸ºfileå¯¹è±¡
// åŸç”Ÿè·å–input:fileçš„file=>inp.files
```

3. uploadæ ·å¼ç¾åŒ–

:::



#### å¯Œæ–‡æœ¬ç¼–è¾‘å™¨  `vue-quillåº“`

å®˜ç½‘åœ°å€ï¼šhttps://vueup.github.io/vue-quill/

::: details è¯¦æƒ…



1. å®‰è£…åŒ…

```js
pnpm add @vueup/vue-quill@latest
```

2. æ³¨å†Œæˆå±€éƒ¨ç»„ä»¶

```jsx
import { QuillEditor } from '@vueup/vue-quill'
import '@vueup/vue-quill/dist/vue-quill.snow.css'
```

3. é¡µé¢ä¸­ä½¿ç”¨ç»‘å®š

```jsx
<div class="editor">
  <quill-editor
    theme="snow"
    v-model:content="formModel.content"
    contentType="html"
  >
  </quill-editor>
</div>
```

4. editoræ ·å¼ç¾åŒ–

```jsx
.editor {
  width: 100%;
  :deep(.ql-editor) {
    min-height: 200px;
  }
}
```

:::



#### æ·»åŠ æ–‡ç« åŠŸèƒ½



##### å¯¹è±¡è½¬formdata

```js
// è½¬æ¢ formData æ•°æ®
const fd = new FormData()
for (let key in formModel.value) {
fd.append(key, formModel.value[key])
}
```



#### å°é¢å›¾ç‰‡å›æ˜¾

##### URL=>File

::: details è¯¦æƒ…

```js
 const res = await artGetDetailService(row.id)
formModel.value = res.data.data
imgUrl.value = baseURL + formModel.value.cover_img
// æäº¤ç»™åå°ï¼Œéœ€è¦çš„æ˜¯ file æ ¼å¼çš„ï¼Œå°†ç½‘ç»œå›¾ç‰‡ï¼Œè½¬æˆ file æ ¼å¼
// ç½‘ç»œå›¾ç‰‡è½¬æˆ file å¯¹è±¡, éœ€è¦è½¬æ¢ä¸€ä¸‹
formModel.value.cover_img = await imageUrlToFile(imgUrl.value, formModel.value.cover_img)
```

```js
// å°†ç½‘ç»œå›¾ç‰‡åœ°å€è½¬æ¢ä¸ºFileå¯¹è±¡
async function imageUrlToFile(url, fileName) {
  try {
    // ç¬¬ä¸€æ­¥ï¼šä½¿ç”¨axiosè·å–ç½‘ç»œå›¾ç‰‡æ•°æ®
    const response = await axios.get(url, { responseType: 'arraybuffer' });
    const imageData = response.data;

    // ç¬¬äºŒæ­¥ï¼šå°†å›¾ç‰‡æ•°æ®è½¬æ¢ä¸ºBlobå¯¹è±¡
    const blob = new Blob([imageData], { type: response.headers['content-type'] });

    // ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Fileå¯¹è±¡
    const file = new File([blob], fileName, { type: blob.type });

    return file;
  } catch (error) {
    console.error('å°†å›¾ç‰‡è½¬æ¢ä¸ºFileå¯¹è±¡æ—¶å‘ç”Ÿé”™è¯¯:', error);
    throw error;
  }
}
```

:::



## ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹é¡µé¢

- ç”¨æˆ·å¤´åƒ
- ç”¨æˆ·å¯†ç 
- ç”¨æˆ·æ˜µç§°ã€é‚®ç®±

### ç”¨æˆ·å¤´åƒ

#### File=>64bit String

::: details è¯¦æƒ…

```js
const handleUploadFile = (file) => {
  // FileReaderç±»å‹ï¼Ÿ
  const reader = new FileReader()
  reader.readAsDataURL(file.raw)
  reader.onload = () => {
    avatarUrl.value = reader.result
  }
}
```

:::

<br/>



## é¡¹ç›®å¼€å‘æµç¨‹å½’çº³

### ä¸€ã€åˆå§‹ç¯å¢ƒé…ç½®

::: details è¯¦æƒ…

- åˆå§‹åŒ–gitä»“åº“
- viteè„šæ‰‹æ¶æ­å»º
- è°ƒæ•´ç¼–è¾‘å™¨æ’ä»¶ä¸è®¾ç½®
- ä¾èµ–å®‰è£…ä¸é…ç½®
  - ä»£ç æ£€æŸ¥
  - ä»£ç æ ¼å¼åŒ–
  - uiç»„ä»¶åº“
  - é¢„å¤„ç†åº“
- è„šæ‰‹æ¶ç›®å½•åŠæ–‡ä»¶ä¿®æ”¹

:::

### äºŒã€åŠŸèƒ½å¼€å‘

::: details è¯¦æƒ…

- apiæ¥å£ä¹¦å†™

- è·¯ç”±å±‚çº§åˆ†æä¸ä¹¦å†™

  - é…ç½®è·¯ç”±å®ˆå«

- é¡µé¢åŠŸèƒ½æ¨¡å—å®ç°

  - ä¹¦å†™é™æ€ç»“æ„
  - ä¹¦å†™åŠŸèƒ½é€»è¾‘


:::



## å¼€å‘ç»†èŠ‚

::: details è¯¦æƒ…

- è¦åšå¥½è·¯ç”±å®ˆå«ï¼Œé˜²æ­¢ä»¥ä¸åˆç†æ–¹å¼è®¿é—®è·¯ç”±
- è¦åšå¥½axiosè¯·æ±‚å°è£…ï¼Œåšå¥½è¯·æ±‚/å“åº”æ‹¦æˆªä¸é”™è¯¯å¤„ç†
- `apiæ¥å£`ä¸`çŠ¶æ€ä»“åº“`åˆ†æ¨¡å—ä¹¦å†™ï¼Œç„¶åç»Ÿä¸€åœ¨`index`å¯¼å…¥å¯¼å‡º
- ä»£ç†å¯¹è±¡ï¼Œè‹¥éœ€è¦å®Œå…¨æ›¿ä»£ï¼Œåˆ™æ¨èç”¨`ref`ä»£ç†ï¼Œå¦åˆ™ï¼Œå°½é‡ä½¿ç”¨`reative`
- piniaæœ¬åœ°å­˜å‚¨éœ€è¦å¯¼å‡ºçš„æ•°æ®ï¼ˆreturnï¼‰æ‰ä¼šç”Ÿæ•ˆ
- export * from â€™xxxxx' å¯ä»¥å®ç°å½“è¡Œå¯¼å…¥å¹¶å¯¼å‡º
- è‹¥æ ¹è·¯ç”±æ— å…·ä½“é¡µé¢ï¼Œåˆ™å¯é€šè¿‡é‡å®šå‘ï¼ˆredirectï¼‰åˆ°å…·ä½“è·¯ç”±
- è·¯ç”±å¯¼å…¥ç»„ä»¶ä½¿ç”¨åŠ¨æ€å¯¼å…¥æ³• componentï¼š( )=>import(è·¯ç”±åœ°å€)
- æ´»ç”¨UIç»„ä»¶çš„æ’æ§½ï¼Œå¯ä»¥ä½¿å†…å®¹å±•ç¤ºæ›´çµæ´»
- è¾ƒå°‘çš„æ ·å¼å°½é‡ä½¿ç”¨è¡Œå†…å¼
- æ¥å£ä¹¦å†™æ—¶ï¼Œbodyæ•°æ®ç”¨dataè¡¨ç¤ºï¼Œparamsæ•°æ®ç”¨paramsè¡¨ç¤ºï¼Œç®€å•ç±»å‹åˆ™ç”¨å¯¹åº”è¡¨ç¤ºå˜é‡å
- è¡¨å•çš„éç©ºæ ¡éªŒã€é¢„æ ¡éªŒè¦è°¨è®°ï¼
- è‹¥ç»„ä»¶ä¸ºè·¯ç”±æ¨¡å—é‡Œå¤ç”¨çš„ï¼Œåˆ™è¯¥ç»„ä»¶å±äºæ”¹æ¨¡å—çš„å­æ¨¡å—ç»„ä»¶modulesä¸­
- è‹¥å¼€å‘æ—¶æ— åç«¯ï¼Œåˆ™å¯ä»¥å°è£…æ¨¡æ‹Ÿæ•°æ®api
- ä¸ºäº†è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ
  - åˆ é™¤ã€æ³¨é”€ã€ç™»å‡ºç­‰æ“ä½œè¦ç”¨ç¡®è®¤æ¡†ç»™äºˆç”¨æˆ·æç¤º
  - ç”¨æ—¶è¾ƒé•¿çš„å¼‚æ­¥æ“ä½œè¦ç”¨æ˜¾ç¤ºLoadingåŠ è½½ã€Skeletonéª¨æ¶å±ç­‰ç»™ç”¨æˆ·çœ‹
  - åˆ—è¡¨ã€è¡¨æ ¼æ— æ•°æ®å±•ç¤ºæ˜¯è¦å±•ç¤ºç©ºå†…å®¹æ’æ§½å†…å®¹
  - è¦ä¸ºé¡µé¢ç»“æ„é€‚å½“è®¾ç½®min-widthï¼Œé˜²æ­¢ç»“æ„è¿‡åº¦å˜å½¢
  - å¯é€‚é‡ä½¿ç”¨å›¾æ ‡æé«˜é¡µé¢ç¾è§‚åº¦
  - ç”¨æˆ·è¯·æ±‚æˆåŠŸä¸å¤±è´¥éƒ½éœ€è¦æœ‰æç¤º
- å‘½å
  - apiï¼šuseXxxService
  - è·¯ç”±ç»„ä»¶ï¼šè·¯ç”±åˆ†ç±»+å…·ä½“åŠŸèƒ½.vue
  - äº‹ä»¶å¤„ç†å‡½æ•°ï¼šhandleXxxï¼ˆï¼‰
  - storeä»“åº“ï¼šuseXxxStore
  - è¡¨å•
    - æ•°æ®ï¼šformModel
    - æ ¡éªŒè§„åˆ™ï¼šrules
    - è¡¨å•å®ä¾‹ï¼šformRef
  - å…ƒç´ /ç»„ä»¶å®ä¾‹ï¼šxxxRef

:::

## éš¾ç‚¹å°è®°

1. èµ„æºURLè½¬Fileå¯¹è±¡
2. å›¾ç‰‡èµ„æºè½¬64ä½å­—ç¬¦ä¸²æ ¼å¼

